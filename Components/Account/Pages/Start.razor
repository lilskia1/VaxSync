@page "/"
@page "/home"
@using MudBlazor
@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager Nav
@inject AuthenticationStateProvider AuthState

<PageTitle>VaxSync</PageTitle>

<style>
    .vx-split {
        display: flex;
        min-height: calc(100vh - 64px)
    }

    .vx-left {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: #fff;
        background: linear-gradient(135deg,#0B3D91,#1BA1E2);
        text-align: center;
        padding: 2rem
    }

    .vx-right {
        flex: 1;
        background: url("images/nurse-student.jpeg") center/cover no-repeat;
        position: relative
    }

        .vx-right::after {
            content: "";
            position: absolute;
            inset: 0;
            background: rgba(11,61,145,.25)
        }

    .vx-logo {
        width: 150px;
        margin-bottom: 1.5rem
    }

    .vx-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin-top: 1.5rem
    }
</style>

<div class="vx-split">
    <section class="vx-left">
        <img src="images/favicon.png" alt="VaxSync Logo" class="vx-logo" />
        <MudText Typo="Typo.h3" Class="fw-bold">VaxSync student vaccine hub</MudText>
        <MudText Typo="Typo.subtitle1" Class="opacity-75 mb-4">
            Track compliance, view alerts, and export records with confidence.
        </MudText>
    </section>

    <section class="vx-right"></section>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        var state = await AuthState.GetAuthenticationStateAsync();
        if (state.User.Identity?.IsAuthenticated == true)
            Nav.NavigateTo("/dashboard", forceLoad: true);
    }
}
